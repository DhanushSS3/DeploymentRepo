{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_a1f9105c8899488e901d9411e3b8382f","networkSymbol":"BTC","orderId":"30a81d70-823e-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","cache-control":"no-cache","connection":"keep-alive","content-length":"666","content-type":"application/json","host":"localhost:3000","postman-token":"6b20ff58-d43b-4192-bb74-da922c54a389","user-agent":"PostmanRuntime/7.45.0","x-tlp-signature":"ad19f51e8de9549a4c19091e0626d97230b198f9cc6a2b8bd573f2381bf2763c"},"level":"info","message":"Received Tylt webhook","timestamp":"2025-08-26T06:11:28.806Z"}
{"level":"error","message":"Invalid webhook signature","signature":"ad19f51e8de9549a4c19091e0626d97230b198f9cc6a2b8bd573f2381bf2763c","timestamp":"2025-08-26T06:11:28.812Z"}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_a1f9105c8899488e901d9411e3b8382f","networkSymbol":"BTC","orderId":"30a81d70-823e-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","cache-control":"no-cache","connection":"keep-alive","content-length":"666","content-type":"application/json","host":"localhost:3000","postman-token":"9dbc61d7-5a04-4d24-a2bf-c63bf01869ad","user-agent":"PostmanRuntime/7.45.0","x-tlp-signature":"b8c379ad184177a49a52c0d9170460101f34bc36c70ff4cfcfafc7df542cbed4"},"level":"info","message":"Received Tylt webhook","timestamp":"2025-08-26T06:12:48.176Z"}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_a1f9105c8899488e901d9411e3b8382f","networkSymbol":"BTC","orderId":"30a81d70-823e-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"error":"Cannot read properties of undefined (reading 'create')","level":"error","message":"Error processing webhook","stack":"TypeError: Cannot read properties of undefined (reading 'create')\n    at CryptoPaymentService.creditUserWallet (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\services\\crypto.payment.service.js:348:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CryptoPaymentService.updatePaymentFromWebhook (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\services\\crypto.payment.service.js:264:9)\n    at async handleWebhook (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\controllers\\crypto.payment.controller.js:254:30)","timestamp":"2025-08-26T06:12:48.278Z"}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_a1f9105c8899488e901d9411e3b8382f","networkSymbol":"BTC","orderId":"30a81d70-823e-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","cache-control":"no-cache","connection":"keep-alive","content-length":"666","content-type":"application/json","host":"localhost:3000","postman-token":"33570561-f7de-4565-bf25-2b9385c38762","user-agent":"PostmanRuntime/7.45.0","x-tlp-signature":"b8c379ad184177a49a52c0d9170460101f34bc36c70ff4cfcfafc7df542cbed4"},"level":"info","message":"Received Tylt webhook","timestamp":"2025-08-26T06:14:50.009Z"}
{"level":"info","merchantOrderId":"livefx_a1f9105c8899488e901d9411e3b8382f","message":"Payment updated from webhook","paymentId":2,"status":"underpaymenT","timestamp":"2025-08-26T06:14:50.080Z"}
{"amount":"100","currency":"USDT","level":"info","message":"Creating crypto deposit request","network":"BSC","timestamp":"2025-08-26T06:31:00.749Z","userId":3}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_c881692a709e4fd4b23500b8d6e1a09d","networkSymbol":"BTC","orderId":"3b0ef203-8246-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","cache-control":"no-cache","connection":"keep-alive","content-length":"666","content-type":"application/json","host":"localhost:3000","postman-token":"2de0ec01-bced-4dab-8f37-a4e1bcfa734f","user-agent":"PostmanRuntime/7.45.0","x-tlp-signature":"b8c379ad184177a49a52c0d9170460101f34bc36c70ff4cfcfafc7df542cbed4"},"level":"info","message":"Received Tylt webhook","timestamp":"2025-08-26T06:31:33.632Z"}
{"level":"error","message":"Invalid webhook signature","signature":"b8c379ad184177a49a52c0d9170460101f34bc36c70ff4cfcfafc7df542cbed4","timestamp":"2025-08-26T06:31:33.633Z"}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_c881692a709e4fd4b23500b8d6e1a09d","networkSymbol":"BTC","orderId":"3b0ef203-8246-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","cache-control":"no-cache","connection":"keep-alive","content-length":"666","content-type":"application/json","host":"localhost:3000","postman-token":"6e1707ea-15ac-4bb4-ada5-c893cf664ee4","user-agent":"PostmanRuntime/7.45.0","x-tlp-signature":"96e975ecc8cbb37fb10f25996a1dd6a06eff3d02f8317429b5a4da6566c06fad"},"level":"info","message":"Received Tylt webhook","timestamp":"2025-08-26T06:31:52.789Z"}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_c881692a709e4fd4b23500b8d6e1a09d","networkSymbol":"BTC","orderId":"3b0ef203-8246-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"error":"Cannot read properties of undefined (reading 'transaction')","level":"error","message":"Error processing webhook","stack":"TypeError: Cannot read properties of undefined (reading 'transaction')\n    at CryptoPaymentService.updatePaymentFromWebhook (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\services\\crypto.payment.service.js:232:41)\n    at handleWebhook (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\controllers\\crypto.payment.controller.js:254:57)\n    at Layer.handleRequest (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\lib\\route.js:157:13)\n    at rawBodyMiddleware (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\middlewares\\rawBody.middleware.js:11:12)\n    at Layer.handleRequest (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\router\\lib\\layer.js:152:17)","timestamp":"2025-08-26T06:31:52.792Z"}
{"body":{"data":{"baseAmount":100,"baseAmountReceived":75,"baseCurrency":"USD","commission":25,"confirmations":6,"createdAt":"2024-01-01T10:00:00Z","depositAddress":"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa","expiresAt":"2024-01-01T12:00:00Z","merchantOrderId":"livefx_c881692a709e4fd4b23500b8d6e1a09d","networkSymbol":"BTC","orderId":"3b0ef203-8246-11f0-9b9d-42010a2801c2","settledAmount":0.0025,"settledCurrency":"BTC","status":"underpaymenT","txHash":"abc123def456ghi789jkl012mno345pqr678stu901vwx234yzab567cde890f","updatedAt":"2024-01-01T11:30:00Z"}},"headers":{"accept":"*/*","accept-encoding":"gzip, deflate, br","cache-control":"no-cache","connection":"keep-alive","content-length":"666","content-type":"application/json","host":"localhost:3000","postman-token":"f4b19ffe-31b7-4439-ac75-f3664b046e51","user-agent":"PostmanRuntime/7.45.0","x-tlp-signature":"96e975ecc8cbb37fb10f25996a1dd6a06eff3d02f8317429b5a4da6566c06fad"},"level":"info","message":"Received Tylt webhook","timestamp":"2025-08-26T06:34:29.945Z"}
{"level":"info","merchantOrderId":"livefx_c881692a709e4fd4b23500b8d6e1a09d","message":"Payment updated from webhook","paymentId":3,"status":"underpaymenT","timestamp":"2025-08-26T06:34:30.011Z"}
{"level":"info","message":"Deposit request received: live user 3, amount: 1000.5, admin: 1","timestamp":"2025-08-26T07:05:30.309Z"}
{"level":"info","message":"Updated cached balance for live user 3: 1150.5","timestamp":"2025-08-26T07:05:30.385Z"}
{"level":"info","message":"Deposit processed successfully: live user 3, amount: 1000.5, new balance: 1150.5","timestamp":"2025-08-26T07:05:30.385Z"}
{"level":"info","message":"Updated cached balance for live user 3: 1151","timestamp":"2025-08-26T07:07:57.982Z"}
{"level":"info","message":"Updated cached balance for live user 3: 1151","timestamp":"2025-08-26T07:08:28.747Z"}
{"level":"error","message":"Failed to get transaction history for user {userId}: (conn:532, no: 1054, SQLState: 42S22) Unknown column 'NaN' in 'where clause'\nsql: SELECT count(*) AS `count` FROM `user_transactions` AS `UserTransaction` WHERE `UserTransaction`.`user_id` = NaN; - parameters:[]","name":"SequelizeDatabaseError","original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"fatal":false,"name":"SqlError","sql":"SELECT count(*) AS `count` FROM `user_transactions` AS `UserTransaction` WHERE `UserTransaction`.`user_id` = NaN;","sqlMessage":"Unknown column 'NaN' in 'where clause'","sqlState":"42S22"},"parameters":{},"parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"fatal":false,"name":"SqlError","sql":"SELECT count(*) AS `count` FROM `user_transactions` AS `UserTransaction` WHERE `UserTransaction`.`user_id` = NaN;","sqlMessage":"Unknown column 'NaN' in 'where clause'","sqlState":"42S22"},"sql":"SELECT count(*) AS `count` FROM `user_transactions` AS `UserTransaction` WHERE `UserTransaction`.`user_id` = NaN;","stack":"Error\n    at Query.run (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\sequelize\\lib\\dialects\\mariadb\\query.js:53:25)\n    at C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.rawSelect (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:434:18)\n    at async UserTransaction.aggregate (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\sequelize\\lib\\model.js:1277:19)\n    at async UserTransaction.count (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\sequelize\\lib\\model.js:1306:20)\n    at async Promise.all (index 0)\n    at async UserTransaction.findAndCountAll (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async SuperadminTransactionService.getUserTransactionHistory (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\services\\superadmin.transaction.service.js:280:29)\n    at async getUserTransactionHistory (C:\\Users\\Dhanush\\Livefxhub-Backend\\services\\nodejs-service\\src\\controllers\\superadmin.transaction.controller.js:292:22)","timestamp":"2025-08-26T07:09:23.555Z"}
{"level":"info","message":"Withdrawal request received: live user 3, amount: 500, admin: 1","timestamp":"2025-08-26T07:12:29.629Z"}
{"level":"info","message":"Updated cached balance for live user 3: 651","timestamp":"2025-08-26T07:12:29.688Z"}
{"level":"info","message":"Withdrawal processed successfully: live user 3, amount: 500, new balance: 651","timestamp":"2025-08-26T07:12:29.688Z"}
