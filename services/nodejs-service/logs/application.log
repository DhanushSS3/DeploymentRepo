{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /half-spreads: jwt expired","timestamp":"2025-09-28T09:39:59.861Z"}
{"level":"info","message":"Starting daily swap processing for Sun Sep 28 2025","timestamp":"2025-09-28T09:41:00.032Z"}
{"level":"info","message":"Processing live orders for swap charges","timestamp":"2025-09-28T09:41:00.032Z"}
{"level":"info","message":"Found 1 open live orders","timestamp":"2025-09-28T09:41:00.060Z"}
{"level":"info","message":"Calculating swap for order: 4946485668000, symbol: BTCUSD, group: VIP","timestamp":"2025-09-28T09:41:00.064Z"}
{"level":"info","message":"Points swap calculation: swapPoints=-2672.66, pointValue=0.01, lots=0.01, result=-0.267266","timestamp":"2025-09-28T09:41:00.124Z"}
{"calculated_amount":-0.267266,"calculation_date":"2025-09-28T09:41:00.032Z","conversion_rate":1,"event_type":"calculation","formula_used":"points: swap_points * point_value * lots","group_name":"VIP","is_crypto":true,"is_triple_swap":false,"level":"info","message":"SWAP_CALCULATION","new_total_swap":-0.267266,"order_id":"4946485668000","order_quantity":0.01,"order_type":"BUY","previous_swap":0,"processing_time_ms":61,"swap_rate":-2672.66,"swap_type":"points","symbol":"BTCUSD","timestamp":"2025-09-28T09:41:00.125Z","user_id":4,"user_type":"live"}
{"level":"info","message":"Calculated swap charge: -0.267266 for order 4946485668000","timestamp":"2025-09-28T09:41:00.125Z"}
{"amount":-0.267266,"balance_after":94618.118262,"balance_before":94618.385528,"created_at":"2025-09-28T09:41:00.187Z","event_type":"transaction","level":"info","message":"SWAP_TRANSACTION","metadata":{"calculation_date":"2025-09-28T09:41:00.032Z","group_name":"VIP","new_total_swap":-0.267266,"order_quantity":"0.01000000","order_type":"BUY","previous_swap":0,"symbol":"BTCUSD"},"order_id":1025,"timestamp":"2025-09-28T09:41:00.234Z","transaction_id":"TXN9052460186672000","user_id":4,"user_type":"live"}
{"application_date":"2025-09-28T09:41:00.032Z","event_type":"application","level":"info","message":"SWAP_APPLICATION","new_swap":-0.267266,"order_id":"4946485668000","previous_swap":0,"success":true,"swap_amount":-0.267266,"timestamp":"2025-09-28T09:41:00.235Z","transaction_id":"TXN9052460186672000","user_id":4,"user_type":"live"}
{"level":"info","message":"Processing demo orders for swap charges","timestamp":"2025-09-28T09:41:00.239Z"}
{"level":"info","message":"No open demo orders found","timestamp":"2025-09-28T09:41:00.249Z"}
{"demo_orders":{"errors":0,"processed":0,"skipped":0,"swap_amount":0,"updated":0},"errors":null,"event_type":"daily_summary","failed_updates":0,"level":"info","live_orders":{"errors":0,"processed":1,"skipped":0,"swap_amount":0,"updated":1},"message":"DAILY_PROCESSING_SUMMARY","processing_date":"2025-09-28T09:41:00.032Z","processing_time_ms":217,"skipped_orders":0,"successful_updates":1,"timestamp":"2025-09-28T09:41:00.249Z","total_orders_processed":1,"total_swap_amount":0}
{"date":"Sun Sep 28 2025","demoOrders":{"errors":0,"processed":0,"skipped":0,"totalSwapAmount":0,"updated":0},"level":"info","liveOrders":{"errors":0,"processed":1,"skipped":0,"totalSwapAmount":0,"updated":1},"message":"Daily swap processing completed:","processingTimeMs":217,"timestamp":"2025-09-28T09:41:00.249Z","totalErrors":0,"totalProcessed":1,"totalSkipped":0,"totalSwapAmount":0,"totalUpdated":1}
{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /half-spreads: jwt expired","timestamp":"2025-09-28T09:41:15.917Z"}
{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /half-spreads: jwt expired","timestamp":"2025-09-28T09:41:56.131Z"}
{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /me: jwt expired","timestamp":"2025-09-28T09:41:56.193Z"}
{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /me: jwt expired","timestamp":"2025-09-28T09:41:56.210Z"}
{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /my-group: jwt malformed","timestamp":"2025-09-28T09:41:56.405Z"}
{"level":"warn","message":"Authentication failed - Invalid or expired token for GET /my-group: jwt malformed","timestamp":"2025-09-28T09:41:56.415Z"}
{"level":"info","message":"Authentication successful for user 4 on GET /half-spreads","timestamp":"2025-09-28T09:41:59.706Z"}
{"level":"info","message":"=== CONTROLLER START: getHalfSpreads ===","timestamp":"2025-09-28T09:41:59.711Z"}
{"level":"info","message":"User group from JWT: \"VIP\"","timestamp":"2025-09-28T09:41:59.711Z"}
{"level":"info","message":"Scanning Redis cluster for pattern: groups:{VIP}:*","timestamp":"2025-09-28T09:41:59.711Z"}
{"level":"info","message":"Authentication successful for user 4 on GET /me","timestamp":"2025-09-28T09:41:59.725Z"}
{"level":"info","message":"Found 173 keys on node 127.0.0.1:7001","timestamp":"2025-09-28T09:41:59.730Z"}
{"level":"info","message":"Found 0 keys on node 127.0.0.1:7002","timestamp":"2025-09-28T09:41:59.838Z"}
{"level":"info","message":"Authentication successful for user 4 on GET /me","timestamp":"2025-09-28T09:41:59.893Z"}
{"level":"info","message":"Found 0 keys on node 127.0.0.1:7003","timestamp":"2025-09-28T09:41:59.898Z"}
{"level":"info","message":"Total keys found across cluster: 173","timestamp":"2025-09-28T09:41:59.898Z"}
{"level":"info","message":"Authentication successful for user 4 on GET /my-group","timestamp":"2025-09-28T09:42:00.173Z"}
{"level":"info","message":"=== CONTROLLER START: getGroupsByName ===","timestamp":"2025-09-28T09:42:00.175Z"}
{"level":"info","message":"User access: extracting group from JWT: \"VIP\"","timestamp":"2025-09-28T09:42:00.175Z"}
{"level":"info","message":"[USER] Searching for groups with name: \"VIP\"","timestamp":"2025-09-28T09:42:00.175Z"}
{"level":"info","message":"Cache stats: {\"total_cached_groups\":1292,\"cache_pattern\":\"groups:*\",\"last_sync\":\"2025-09-28T09:39:17.467Z\",\"total_synced\":1292,\"sync_duration_ms\":5785,\"sync_version\":\"1.0\"}","timestamp":"2025-09-28T09:42:00.198Z"}
{"level":"info","message":"Searching Redis with pattern: groups:{VIP}:* for group: VIP","timestamp":"2025-09-28T09:42:00.199Z"}
{"level":"info","message":"Found 173 total keys matching pattern: groups:{VIP}:*","timestamp":"2025-09-28T09:42:00.213Z"}
{"level":"info","message":"Processing 173 keys: [\"groups:{VIP}:AUDJPY\",\"groups:{VIP}:UNIUSD\",\"groups:{VIP}:ENJUSD\"]...","timestamp":"2025-09-28T09:42:00.213Z"}
{"level":"info","message":"Successfully processed 173/173 instruments for group VIP","timestamp":"2025-09-28T09:42:00.379Z"}
{"level":"info","message":"Successfully retrieved 173 groups for pattern: groups:{VIP}:*","timestamp":"2025-09-28T09:42:00.666Z"}
{"level":"info","message":"[USER] Found 173 groups for VIP","timestamp":"2025-09-28T09:42:00.667Z"}
{"level":"info","message":"Authentication successful for user 4 on GET /my-group","timestamp":"2025-09-28T09:42:00.678Z"}
{"level":"info","message":"=== CONTROLLER START: getGroupsByName ===","timestamp":"2025-09-28T09:42:00.679Z"}
{"level":"info","message":"User access: extracting group from JWT: \"VIP\"","timestamp":"2025-09-28T09:42:00.679Z"}
{"level":"info","message":"[USER] Searching for groups with name: \"VIP\"","timestamp":"2025-09-28T09:42:00.679Z"}
{"level":"info","message":"Authentication successful for user 4 on GET /","timestamp":"2025-09-28T09:42:00.697Z"}
{"level":"info","message":"Cache stats: {\"total_cached_groups\":1292,\"cache_pattern\":\"groups:*\",\"last_sync\":\"2025-09-28T09:39:17.467Z\",\"total_synced\":1292,\"sync_duration_ms\":5785,\"sync_version\":\"1.0\"}","timestamp":"2025-09-28T09:42:00.703Z"}
{"level":"info","message":"Searching Redis with pattern: groups:{VIP}:* for group: VIP","timestamp":"2025-09-28T09:42:00.703Z"}
{"level":"info","message":"Found 173 total keys matching pattern: groups:{VIP}:*","timestamp":"2025-09-28T09:42:00.715Z"}
{"level":"info","message":"Processing 173 keys: [\"groups:{VIP}:AUDJPY\",\"groups:{VIP}:UNIUSD\",\"groups:{VIP}:ENJUSD\"]...","timestamp":"2025-09-28T09:42:00.715Z"}
{"level":"info","message":"Successfully retrieved 173 groups for pattern: groups:{VIP}:*","timestamp":"2025-09-28T09:42:01.359Z"}
{"level":"info","message":"[USER] Found 173 groups for VIP","timestamp":"2025-09-28T09:42:01.359Z"}
